#!/usr/bin/env python
# generated by wxGlade 0.3.3 on Sat Jul 24 10:49:02 2004


import wx
import string

from options import *

class MyDialog(wx.Dialog):
    def __init__(self, *args, **kwds):
        # begin wxGlade: MyDialog.__init__
        kwds["style"] = wx.DEFAULT_DIALOG_STYLE
        wx.Dialog.__init__(self, *args, **kwds)
        self.notebook = wx.Notebook(self, -1, style=0)
        self.noteboo_pane_emerge = wx.Panel(self.notebook, -1)
        self.noteboo_pane_dev = wx.Panel(self.notebook, -1)
        self.noteboo_pane_editor = wx.Panel(self.notebook, -1)
        self.noteboo_pane_general = wx.Panel(self.notebook, -1)
        self.notebook_ext_apps = wx.Panel(self.notebook, -1)
        self.text_ctrl_userName = wx.TextCtrl(self.notebook_ext_apps, -1, "")
        self.label_user = wx.StaticText(self.notebook_ext_apps, -1, "Run application as this user name\n(Web browser, diff)")
        self.text_ctrl_editor = wx.TextCtrl(self.notebook_ext_apps, -1, "")
        self.label_editor = wx.StaticText(self.notebook_ext_apps, -1, "External editor.\nIf using gvim use the -f option.")
        self.text_ctrl_browser = wx.TextCtrl(self.notebook_ext_apps, -1, "")
        self.label_browser = wx.StaticText(self.notebook_ext_apps, -1, "Used for help system and\nchecking HOMEPAGE variable.")
        self.text_ctrl_diff = wx.TextCtrl(self.notebook_ext_apps, -1, "")
        self.label_diff = wx.StaticText(self.notebook_ext_apps, -1, "GUI diff program.\ngtkdiff, kompare etc.")
        self.text_ctrl_xterm = wx.TextCtrl(self.notebook_ext_apps, -1, "")
        self.label_xterm = wx.StaticText(self.notebook_ext_apps, -1, "(Konsole will open new sessions)")
        self.checkbox_strip_header = wx.CheckBox(self.noteboo_pane_general, -1, "Auto-strip CVS header on save")
        self.checkbox_clear_log_window = wx.CheckBox(self.noteboo_pane_general, -1, "Clear log window on new or loading ebuild")
        self.checkbox_check_syntax = wx.CheckBox(self.noteboo_pane_general, -1, "Check syntax when saving")
        self.checkbox_external_control = wx.CheckBox(self.noteboo_pane_general, -1, "Allow control from vim or gvim")
        self.checkbox_logfile = wx.CheckBox(self.noteboo_pane_general, -1, "Log output to file")
        self.text_ctrl_logfile = wx.TextCtrl(self.noteboo_pane_general, -1, "")
        self.button_font = wx.Button(self.noteboo_pane_editor, -1, "Font")
        self.text_ctrl_font = wx.TextCtrl(self.noteboo_pane_editor, -1, "", style=wx.TE_READONLY)
        self.checkbox_highlight = wx.CheckBox(self.noteboo_pane_editor, -1, "Sourcecode highlighting (color)")
        self.checkbox_gentoo_highlighting = wx.CheckBox(self.noteboo_pane_editor, -1, "Highlight Gentoo keywords/functions/variables")
        self.checkbox_whitespace = wx.CheckBox(self.noteboo_pane_editor, -1, "Show whitespace")
        self.label_tabsize = wx.StaticText(self.noteboo_pane_editor, -1, "Spaces per tab char:")
        self.text_ctrl_1 = wx.TextCtrl(self.noteboo_pane_editor, -1, "4")
        self.label_dev_warning = wx.StaticText(self.noteboo_pane_dev, -1, "These are only necessary for official Gentoo Developers")
        self.label_dev_user = wx.StaticText(self.noteboo_pane_dev, -1, "cvs, repoman and echangelog will run as this user:")
        self.text_ctrl_devUserName = wx.TextCtrl(self.noteboo_pane_dev, -1, "")
        self.label_cvs_root = wx.StaticText(self.noteboo_pane_dev, -1, "Enter directory for CVS (gentoo-x86)")
        self.text_ctrl_cvs_root = wx.TextCtrl(self.noteboo_pane_dev, -1, "")
        self.label_USE = wx.StaticText(self.noteboo_pane_emerge, -1, "USE=")
        self.text_ctrl_USE = wx.TextCtrl(self.noteboo_pane_emerge, -1, "")
        self.label_FEATURES = wx.StaticText(self.noteboo_pane_emerge, -1, "FEATURES=")
        self.text_ctrl_FEATURES = wx.TextCtrl(self.noteboo_pane_emerge, -1, "noauto")
        self.button_save = wx.Button(self, wx.ID_OK, "Save")
        self.button_cancel = wx.Button(self, wx.ID_CANCEL, "Cancel")

        self.__set_properties()
        self.__do_layout()
        # end wxGlade

    def __set_properties(self):
        # begin wxGlade: MyDialog.__set_properties
        self.SetTitle("Preferences")
        self.Hide()
        self.text_ctrl_userName.SetSize((227, 22))
        self.text_ctrl_userName.SetFocus()
        self.text_ctrl_editor.SetSize((227, 22))
        self.text_ctrl_browser.SetSize((227, 22))
        self.text_ctrl_diff.SetSize((227, 22))
        self.text_ctrl_xterm.SetSize((227, 22))
        self.checkbox_external_control.Enable(0)
        self.label_dev_warning.SetForegroundColour(wx.Colour(255, 0, 0))
        self.label_dev_warning.SetFont(wx.Font(12, wx.DEFAULT, wx.NORMAL, wx.NORMAL, 1, ""))
        self.text_ctrl_devUserName.SetSize((130, 22))
        # end wxGlade

    def __do_layout(self):
        # begin wxGlade: MyDialog.__do_layout
        sizer_1 = wx.BoxSizer(wx.VERTICAL)
        sizer_2 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_16 = wx.BoxSizer(wx.VERTICAL)
        sizer_18 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_17 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_13 = wx.BoxSizer(wx.VERTICAL)
        sizer_cvs = wx.StaticBoxSizer(wx.StaticBox(self.noteboo_pane_dev, -1, "CVS"), wx.VERTICAL)
        sizer_dev_user = wx.StaticBoxSizer(wx.StaticBox(self.noteboo_pane_dev, -1, "User name"), wx.VERTICAL)
        sizer_11 = wx.BoxSizer(wx.VERTICAL)
        sizer_3 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_12 = wx.StaticBoxSizer(wx.StaticBox(self.noteboo_pane_editor, -1, "Font"), wx.HORIZONTAL)
        sizer_8 = wx.BoxSizer(wx.VERTICAL)
        sizer_9 = wx.StaticBoxSizer(wx.StaticBox(self.noteboo_pane_general, -1, "Logging"), wx.VERTICAL)
        sizer_10 = wx.BoxSizer(wx.HORIZONTAL)
        grid_sizer_ext_apps = wx.GridSizer(3, 2, 0, 0)
        sizer_xterm = wx.StaticBoxSizer(wx.StaticBox(self.notebook_ext_apps, -1, "xterm"), wx.VERTICAL)
        sizer_diff = wx.StaticBoxSizer(wx.StaticBox(self.notebook_ext_apps, -1, "Graphical diff"), wx.VERTICAL)
        sizer_browser = wx.StaticBoxSizer(wx.StaticBox(self.notebook_ext_apps, -1, "Web browser"), wx.VERTICAL)
        sizer_editor = wx.StaticBoxSizer(wx.StaticBox(self.notebook_ext_apps, -1, "Editor"), wx.VERTICAL)
        sizer_user = wx.StaticBoxSizer(wx.StaticBox(self.notebook_ext_apps, -1, "User name"), wx.VERTICAL)
        sizer_user.Add(self.text_ctrl_userName, 0, wx.ALL|wx.EXPAND, 4)
        sizer_user.Add(self.label_user, 0, wx.ALL, 0)
        grid_sizer_ext_apps.Add(sizer_user, 0, 0, 0)
        sizer_editor.Add(self.text_ctrl_editor, 0, wx.ALL|wx.EXPAND, 4)
        sizer_editor.Add(self.label_editor, 0, 0, 12)
        grid_sizer_ext_apps.Add(sizer_editor, 0, 0, 0)
        sizer_browser.Add(self.text_ctrl_browser, 0, wx.ALL|wx.EXPAND, 4)
        sizer_browser.Add(self.label_browser, 0, 0, 0)
        grid_sizer_ext_apps.Add(sizer_browser, 0, 0, 0)
        sizer_diff.Add(self.text_ctrl_diff, 0, wx.ALL|wx.EXPAND, 4)
        sizer_diff.Add(self.label_diff, 0, 0, 0)
        grid_sizer_ext_apps.Add(sizer_diff, 0, 0, 0)
        sizer_xterm.Add(self.text_ctrl_xterm, 0, wx.ALL|wx.EXPAND, 4)
        sizer_xterm.Add(self.label_xterm, 0, 0, 0)
        grid_sizer_ext_apps.Add(sizer_xterm, 0, 0, 0)
        self.notebook_ext_apps.SetAutoLayout(1)
        self.notebook_ext_apps.SetSizer(grid_sizer_ext_apps)
        grid_sizer_ext_apps.Fit(self.notebook_ext_apps)
        grid_sizer_ext_apps.SetSizeHints(self.notebook_ext_apps)
        sizer_8.Add(self.checkbox_strip_header, 0, wx.ALL, 8)
        sizer_8.Add(self.checkbox_clear_log_window, 0, wx.ALL, 8)
        sizer_8.Add(self.checkbox_check_syntax, 0, wx.ALL, 8)
        sizer_8.Add(self.checkbox_external_control, 0, wx.ALL, 8)
        sizer_10.Add(self.checkbox_logfile, 0, wx.ALL, 8)
        sizer_10.Add(self.text_ctrl_logfile, 1, wx.ALL, 8)
        sizer_9.Add(sizer_10, 1, wx.EXPAND, 0)
        sizer_8.Add(sizer_9, 0, wx.EXPAND, 0)
        self.noteboo_pane_general.SetAutoLayout(1)
        self.noteboo_pane_general.SetSizer(sizer_8)
        sizer_8.Fit(self.noteboo_pane_general)
        sizer_8.SetSizeHints(self.noteboo_pane_general)
        sizer_12.Add(self.button_font, 0, wx.ALL, 8)
        sizer_12.Add(self.text_ctrl_font, 1, wx.ALL, 8)
        sizer_11.Add(sizer_12, 0, wx.ALL|wx.EXPAND, 12)
        sizer_11.Add(self.checkbox_highlight, 0, wx.ALL|wx.EXPAND, 12)
        sizer_11.Add(self.checkbox_gentoo_highlighting, 0, wx.ALL|wx.EXPAND, 12)
        sizer_11.Add(self.checkbox_whitespace, 0, wx.ALL|wx.EXPAND, 12)
        sizer_3.Add(self.label_tabsize, 0, wx.LEFT|wx.RIGHT, 12)
        sizer_3.Add(self.text_ctrl_1, 0, 0, 0)
        sizer_11.Add(sizer_3, 1, wx.EXPAND, 0)
        self.noteboo_pane_editor.SetAutoLayout(1)
        self.noteboo_pane_editor.SetSizer(sizer_11)
        sizer_11.Fit(self.noteboo_pane_editor)
        sizer_11.SetSizeHints(self.noteboo_pane_editor)
        sizer_13.Add(self.label_dev_warning, 0, wx.LEFT|wx.TOP, 6)
        sizer_dev_user.Add(self.label_dev_user, 0, wx.ALL, 12)
        sizer_dev_user.Add(self.text_ctrl_devUserName, 0, wx.ALL, 12)
        sizer_13.Add(sizer_dev_user, 0, wx.ALL|wx.EXPAND, 20)
        sizer_cvs.Add(self.label_cvs_root, 0, wx.LEFT|wx.TOP, 12)
        sizer_cvs.Add(self.text_ctrl_cvs_root, 0, wx.ALL|wx.EXPAND, 12)
        sizer_13.Add(sizer_cvs, 0, wx.ALL|wx.EXPAND, 20)
        self.noteboo_pane_dev.SetAutoLayout(1)
        self.noteboo_pane_dev.SetSizer(sizer_13)
        sizer_13.Fit(self.noteboo_pane_dev)
        sizer_13.SetSizeHints(self.noteboo_pane_dev)
        sizer_17.Add(self.label_USE, 0, wx.ALL, 12)
        sizer_17.Add(self.text_ctrl_USE, 1, wx.ALL, 12)
        sizer_16.Add(sizer_17, 0, wx.EXPAND, 0)
        sizer_18.Add(self.label_FEATURES, 0, wx.ALL, 12)
        sizer_18.Add(self.text_ctrl_FEATURES, 1, wx.ALL, 12)
        sizer_16.Add(sizer_18, 0, wx.EXPAND, 0)
        self.noteboo_pane_emerge.SetAutoLayout(1)
        self.noteboo_pane_emerge.SetSizer(sizer_16)
        sizer_16.Fit(self.noteboo_pane_emerge)
        sizer_16.SetSizeHints(self.noteboo_pane_emerge)
        self.notebook.AddPage(self.notebook_ext_apps, "External apps")
        self.notebook.AddPage(self.noteboo_pane_general, "General")
        self.notebook.AddPage(self.noteboo_pane_editor, "Editor")
        self.notebook.AddPage(self.noteboo_pane_dev, "Gentoo Developer")
        self.notebook.AddPage(self.noteboo_pane_emerge, "Emerge")
        sizer_1.Add(wx.NotebookSizer(self.notebook), 1, wx.ALL|wx.EXPAND, 4)
        sizer_2.Add(self.button_save, 0, wx.LEFT, 20)
        sizer_2.Add(self.button_cancel, 0, wx.LEFT, 20)
        sizer_1.Add(sizer_2, 0, wx.ALL|wx.EXPAND, 12)
        self.SetAutoLayout(1)
        self.SetSizer(sizer_1)
        sizer_1.Fit(self)
        sizer_1.SetSizeHints(self)
        self.Layout()
        # end wxGlade

        self.checkbox_highlight.Disable()
        self.checkbox_gentoo_highlighting.Disable()

        myOptions = Options()
        p = myOptions.Prefs()

        #ext apps
        self.text_ctrl_userName.SetValue(p['userName'])
        self.text_ctrl_browser.SetValue(p['browser'])
        self.text_ctrl_xterm.SetValue(p['xterm'])
        self.text_ctrl_diff.SetValue(p['diff'])
        self.text_ctrl_editor.SetValue(p['editor'])

        #General
        self.checkbox_strip_header.SetValue(int(p['stripHeader']))
        self.checkbox_clear_log_window.SetValue(int(p['clearLog']))
        self.checkbox_check_syntax.SetValue(int(p['checkSyntax']))
        self.checkbox_external_control.SetValue(int(p['externalControl']))
        self.checkbox_logfile.SetValue(int(p['logfile']))
        self.text_ctrl_logfile.SetValue(p['logFilename'])

        #Editor
        self.text_ctrl_font.SetValue(p['font'])
        self.checkbox_highlight.SetValue(int(p['highlighting']))
        self.checkbox_gentoo_highlighting.SetValue(int(p['gentooHighlight']))
        self.checkbox_whitespace.SetValue(int(p['show_whitespace']))
        #spaces per tab
        #TODO: change in wxlade
        try:
            self.text_ctrl_1.SetValue(p['tabsize'])
        except:
            self.text_ctrl_1.SetValue('4')
        #gen devs
        self.text_ctrl_cvs_root.SetValue(p['cvsRoot'])
        self.text_ctrl_devUserName.SetValue(p['devUserName'])

        #portage 
        self.text_ctrl_USE.SetValue(p['use'])
        self.text_ctrl_FEATURES.SetValue(p['features'])

        wx.EVT_BUTTON(self, self.button_font.GetId(), self.OnFont)

    def OnFont(self, evt):
        """select font"""
        data = wx.FontData()
        face,size=self.text_ctrl_font.GetValue().split(',')
        size=eval(size)
        font=wx.Font(size,wx.DEFAULT,wx.NORMAL,wx.NORMAL,0,face)
        data.SetInitialFont(font)
        dialog=wx.FontDialog(self,data)
        try:
            if dialog.ShowModal() == wx.ID_OK:
                data = dialog.GetFontData()
                font = data.GetChosenFont()
                colour = data.GetColour()
                self.text_ctrl_font.SetValue('%s,%s'%(font.GetFaceName(),font.GetPointSize()))
        finally:
            dialog.Destroy()

 

# end of class MyDialog


